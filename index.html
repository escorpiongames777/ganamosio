<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Plataforma Verificada</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Meta Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
    n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
    t.src='https://connect.facebook.net/en_US/fbevents.js';s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script');
    fbq('init', '24818917464366642'); /* <-- Verifica este ID */
    fbq('track', 'PageView');
  </script>
  <noscript>
    <img height="1" width="1" style="display:none"
      src="https://www.facebook.com/tr?id=24818917464366642&ev=PageView&noscript=1"/>
  </noscript>
  <!-- End Meta Pixel Code -->

  <style>
    :root{
      --wa-green: #25D366;
      --wa-green-dark: #1ebe57;
      --wa-green-soft: #e9f9ef;
      --text: #1a1a1a;
      --muted: #6b7280;
      --border: #e5e7eb;
      --white: #ffffff;
    }
    * { box-sizing: border-box; }
    body { margin:0; font-family:'Inter',sans-serif; background:var(--white); color:var(--text);
           display:flex; flex-direction:column; align-items:center; padding:20px; }
    header { margin-top:30px; text-align:center; }
    .logo-text { color:var(--wa-green); font-weight:700; font-size:26px; }
    hr { width:100%; border:none; border-top:1px solid var(--border); margin:20px 0 10px; }
    .verified { text-align:center; padding-top:10px; }
    .verified img { width:64px; height:64px; margin:12px 0 10px; }
    .verified h2 { font-size:22px; margin:6px 0 4px; color:var(--text); font-weight:700; }
    .verified .green { color:var(--wa-green); font-weight:600; margin:0; }
    .message { background:var(--wa-green-soft); padding:14px 18px; border-radius:14px; margin:22px 0 24px;
               font-size:16px; color:var(--text); border:1px solid #d9f3e3; max-width:640px; }
    .whatsapp-button { background:var(--wa-green); color:#fff; padding:18px 30px; border-radius:999px;
      font-weight:800; letter-spacing:.3px; text-decoration:none; display:inline-flex; align-items:center;
      justify-content:center; margin-bottom:22px; font-size:18px; border:none; cursor:pointer; position:relative;
      transition:transform .2s, box-shadow .2s, background-color .2s; min-width:260px;
      box-shadow:0 8px 20px rgba(37,211,102,0.25);}
    .whatsapp-button:hover { transform:translateY(-2px); background:var(--wa-green-dark);
      box-shadow:0 12px 26px rgba(37,211,102,0.32);}
    .whatsapp-button:active { transform:translateY(0); }
    .whatsapp-button i { margin-right:10px; font-size:22px; }
    @keyframes pulse { 0%{box-shadow:0 0 0 0 rgba(37,211,102,.45);}
      70%{box-shadow:0 0 0 18px rgba(37,211,102,0);} 100%{box-shadow:0 0 0 0 rgba(37,211,102,0);} }
    .whatsapp-button.pulse{ animation:pulse 2.2s infinite; }
    .clientes { background:#f3f4f6; color:var(--text); padding:12px 20px; border-radius:999px; font-weight:700;
      margin-bottom:12px; border:1px solid var(--border); display:inline-flex; align-items:center; gap:10px; }
    .clientes::before{ content:"\f0c0"; font: normal 16px/1 "Font Awesome 6 Free"; font-weight:900; color:var(--text); opacity:.85; }
    .trustpilot { font-size:14px; padding:12px 16px; border:1px dashed #cbd5e1; border-radius:14px; margin-bottom:18px;
      text-align:center; color:var(--muted); background:#fafafa; max-width:680px; }
    .trustpilot img { margin-top:8px; max-width:160px; }
    .footer { position:fixed; bottom:0; width:100%; background:var(--wa-green); color:#fff; text-align:center;
      padding:10px; font-weight:800; font-size:14px; letter-spacing:.2px; }
    @media (max-width:600px){
      .whatsapp-button{ font-size:16px; padding:16px 24px; min-width:220px; }
      .clientes{ font-size:14px; padding:10px 16px; }
      .message{ font-size:14px; }
    }
  </style>
</head>
<body>
  <header>
    <div class="logo-text">Plataforma Verificada</div>
  </header>

  <hr />

  <section class="verified">
    <!-- Logo: ahora sin target y con id para capturar el click -->
    <a id="wa-logo" href="#">
      <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp Logo" width="64" height="64" />
    </a>
    <h2>‚úÖ <b>Plataforma Verificada</b> ‚úÖ</h2>
    <p class="green">Casino de Confianza</p>
  </section>

  <div class="message">
    Te estamos conectando con nuestro equipo v√≠a WhatsApp.
  </div>

  <!-- Bot√≥n principal: sin target, el script maneja la redirecci√≥n -->
  <a id="whatsapp-button" class="whatsapp-button pulse" href="#">
    <i class="fab fa-whatsapp"></i> ¬°QUIERO MI BONO!
  </a>

  <div class="clientes">
    +10.000 CLIENTES GANANDO todos los d√≠as
  </div>

  <div class="trustpilot">
    "Excelente" ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Calificaci√≥n 4.9/5 en Trustpilot<br/>
    <img src="https://logowik.com/content/uploads/images/trustpilot-stars9095.jpg" alt="Trustpilot" />
  </div>

  <div class="footer">
    üéÅ BONO ACTIVO - ¬°Solic√≠talo ahora por WhatsApp!
  </div>

  <!-- Rotador + evento Lead + delay -->
  <script>
  // N√∫meros y mensaje
  const whatsappNumbers = [
    "5491176300373",
    "5491124985966",
    "5491171201922",
    "5491122930527"
  ];
  const message = "Quiero el bono del 20%";
  let currentIndex = 0;

  // Detectar m√≥vil vs desktop (para usar web.whatsapp en PC)
  function buildWAUrl(number){
    const encoded = encodeURIComponent(message);
    const isMobile = /Android|iPhone|iPad|iPod/i.test(navigator.userAgent);
    if (isMobile) {
      return `https://wa.me/${number}?text=${encoded}`;
    } else {
      return `https://web.whatsapp.com/send?phone=${number}&text=${encoded}`;
    }
  }

  // NO incrementa √≠ndice; s√≥lo ‚Äúmira‚Äù el pr√≥ximo
  function peekNextUrl(){
    return buildWAUrl(whatsappNumbers[currentIndex]);
  }

  // S√≠ incrementa √≠ndice y devuelve la URL siguiente
  function nextUrl(){
    const number = whatsappNumbers[currentIndex];
    currentIndex = (currentIndex + 1) % whatsappNumbers.length;
    return buildWAUrl(number);
  }

  function goWhatsApp(e){
    e.preventDefault();

    const url = nextUrl();

    // Disparar evento, pero que NUNCA bloquee la redirecci√≥n
    try { fbq('track', 'Lead', {content_name: 'WhatsAppClick'}); } catch(_) {}

    // Abrimos en nueva pesta√±a para no cortar el env√≠o del evento
    // (algunos navegadores bloquean si no es gesto de usuario; ac√° s√≠ lo es)
    const win = window.open('about:blank', '_blank');

    // Redirecci√≥n con peque√±os ‚Äúreintentos‚Äù por si el primero falla
    setTimeout(() => { if (win) win.location.href = url; else window.location.href = url; }, 150);
    setTimeout(() => { if (!document.hidden) { if (win) win.location.href = url; else window.location.href = url; } }, 900);
  }

  // Bind de eventos cuando el DOM ya existe
  const btn = document.getElementById('whatsapp-button');
  const logo = document.getElementById('wa-logo');

  if (btn) {
    // href inicial visible (por si alguien copia el link)
    btn.setAttribute('href', peekNextUrl());
    // abrir en nueva pesta√±a para robustez
    btn.setAttribute('target', '_blank');
    btn.setAttribute('rel', 'noopener noreferrer');
    btn.addEventListener('click', goWhatsApp);
  }
  if (logo) {
    logo.setAttribute('href', '#');
    logo.addEventListener('click', goWhatsApp);
  }
</script>
